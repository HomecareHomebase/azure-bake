name: test-package
shortName: tstpkg
version: 1.0.0
resourceGroup: true
rgOverride: "[util.variable('test2','default')]"
parallelRegions: false
variables:
  test1: "[util.variable('test2','default')]"
  test2: whilke-poc
recipe:
  webapp:
    properties:
      type: software
      template: webapp
      parameters:
    dependsOn:
      - storage1
      - storage2
  custom:
    properties:
      type: function
      template: customEval
      parameters:
    dependsOn:
      - storage1
      - storage2
  storage1:
    properties:
      type: infrastucture
      template: ./test/arm.json
      parameters:
        name: "[util.create_storage_name('wpoctest1')]"
        name 2: this is a long string
    dependsOn:    
  storage2:
    properties:
      type: infrastucture
      template: ./test/arm2.json
      parameters:
        name: "[util.create_storage_name('wpoctest2')]"
    dependsOn:    
